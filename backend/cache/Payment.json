[  {
    "paymentId": "PAY-20240522-123456",
    "userId": "660a1f2b5f1a2c3d4e5f6789",
    "books": [
      { "title": "Cien años de soledad", "quantity": 1, "price": 35.00 },
      { "title": "El amor en los tiempos del cólera", "quantity": 2, "price": 25.00 }
    ],
    "total": 85.00,
    "paymentMethod": "tarjeta",
    "paymentStatus": "completado",
    "transactionDetails": "Pago procesado con éxito",
    "paymentDate": "2025-05-22T16:30:00.000Z"
  }
]

const express = require('express');
const fs = require('fs');
const path = require('path');
const router = express.Router();

const PAYMENT_PATH = path.join(__dirname, '../cache/Payment.json');

router.post('/', (req, res) => {
    let payments = [];
    if (fs.existsSync(PAYMENT_PATH)) {
        payments = JSON.parse(fs.readFileSync(PAYMENT_PATH, 'utf-8'));
    }
    payments.push(req.body);
    fs.writeFileSync(PAYMENT_PATH, JSON.stringify(payments, null, 2));
    res.status(201).json({ message: 'Comprobante guardado', id: req.body.paymentId });
});

module.exports = router;
